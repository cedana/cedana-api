syntax = "proto3";

package plugins.runc;

message Runc {
  string ID = 1;
  string Bundle = 2;
  string Root = 3;
  bool NoPivot = 4;
  bool NoNewKeyring = 5;
  string WorkingDir = 6;
  string ConsoleSocket = 7;
  bool Detach = 8;
  string PidFile = 9;
  string Rootless = 10;
  bool SystemdCgroup = 11;
  bool NoSubreaper = 12;
  int32 PreserveFDs = 13;
  string NetnsEth0IPv4Addr = 14;
}

message QueryReq {
  string Root = 1;
  repeated string IDs = 2;
}

message QueryResp {
  repeated Runc Containers = 1;
}

message RWFile {
  string Path = 1;
  uint32 Mode = 2;
  uint32 Uid = 3;
  uint32 Gid = 4;
  string Type = 5; // "file", "dir", "symlink", "chardev", "blockdev"
  uint32 DevMajor = 6;
  uint32 DevMinor = 7;
  map<string, string> Xattrs = 8;
  string SymlinkTarget = 9;
  uint64 Mtime = 10;
  repeated bytes Content = 11; // repeated for chunking large files to not take up ram
}

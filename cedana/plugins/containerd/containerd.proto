syntax = "proto3";

package plugins.containerd;

import "plugins/runc/runc.proto";

message Containerd {
  string ID = 1;
  string Address = 2;
  string Namespace = 3;
  Image Image = 4;
  bool Rootfs = 5;
  bool RootfsOnly = 6;
  repeated int32 GPUs = 7;
  repeated string Args = 8;
  bool NoPivot = 9;
  repeated string Env = 10;

  optional plugins.runc.Runc Runc = 101;
  // Can add additional low-level runtimes here
}

message Image {
  string Name = 1;
  string Username = 2;
  string Secret = 3;
}

message RWFile {
  string Path = 1;
  uint32 Mode = 2;
  uint32 Uid = 3;
  uint32 Gid = 4;
  string Type = 5; // "file", "dir", "symlink", "chardev", "blockdev"
  uint32 DevMajor = 6;
  uint32 DevMinor = 7;
  map<string, string> Xattrs = 8;
  string SymlinkTarget = 9;
  uint64 Mtime = 10;
  repeated bytes Content = 11; // repeated for chunking large files to not take up ram
}
